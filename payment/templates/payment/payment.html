{% extends "base.html" %}
{% load static %}
{% load bag_tools %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'checkout/css/checkout.css' %}">
{% endblock %}

{% block page_header %}
<div class="container header-container">
    <div class="row">
        <div class="col"></div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="overlay"></div>
<div class="container">
    <div class="row">
        <div class="col">
            <hr>
            <h2 class="logo-font mb-4">Checkout</h2>
            <hr>
        </div>
    </div>

    <!-- order summary   -->
    <div class="row g-5">
        <div class="col-md-5 col-lg-6 order-md-last">
            <h4 class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-secondary my-heading-font">Order Summary
                </span>
                <span class="badge bg-secondary ">{{ product_count }}
                </span>
            </h4>
            <ul class="list-group mb-3">
                {% for item in cart_items %}
                <li class="list-group-item d-flex justify-content-between lh-sm">
                    <div class="col-4 mb-1">
                        <a href="{% url 'product_detail' item.product.id %}">
                            {% if item.product.image %}
                            <img class="w-100" src="{{ item.product.image.url }}" alt="{{ product.name }}">
                            {% else %}
                            <img class="w-100" src="{{ MEDIA_URL }}noimage.png" alt="{{ product.name }}">
                            {% endif %}
                        </a>
                    </div>
                    <div>
                        <h6 class="my-0">{{item.product.name}} ({{ item.quantity }})
                        </h6>

                    </div>
                    <span class="text-muted"> €{{ item.product.price | calc_subtotal:item.quantity }}
                    </span>
                </li>
                {% endfor %}

                <li class="list-group-item d-flex justify-content-between">
                    <span>Total (euro)
                    </span>
                    <strong> €{{ total | floatformat:2 }}
                    </strong>
                </li>
            </ul>
        </div>
    </div>


        {% endblock %}